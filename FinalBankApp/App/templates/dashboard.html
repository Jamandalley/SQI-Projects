{% extends "base.html" %}

{% block title %}Dashboard - RECoBank{% endblock %}

{% block content %}
<h1>Welcome, {{ current_user.customer.first_name }} {{ current_user.customer.last_name }}</h1>
<div class="dashboard">
    <section class="account-summary">
        <h2>Account Summary</h2>
        {% if accounts %}
            {% for account in accounts %}
                <div class="account-card">
                    <h3>{{ account.account_type }} Account</h3>
                    <p>Account Number: {{ account.account_number }}</p>
                    <p>Balance: ${{ "%.2f"|format(account.balance) }}</p>
                    <a href="{{ url_for('account.check_balance', account_id=account.id) }}" class="btn btn-secondary">View Details</a>
                </div>
            {% endfor %}
        {% else %}
            <p>You don't have any accounts yet. <a href="{{ url_for('account.create_account') }}">Create an account</a></p>
        {% endif %}
    </section>
    
    <section class="quick-actions">
        <h2>Quick Actions</h2>
        <ul>
            <li><a href="{{ url_for('transaction.transfer') }}" class="btn btn-primary">Transfer Money</a></li>
            <li><a href="{{ url_for('transaction.deposit') }}" class="btn btn-primary">Deposit</a></li>
            <li><a href="{{ url_for('transaction.withdraw') }}" class="btn btn-primary">Withdraw</a></li>
            <li><a href="{{ url_for('account.create_account') }}" class="btn btn-secondary">Open New Account</a></li>
        </ul>
    </section>
    
    <section class="recent-transactions">
        <h2>Recent Transactions</h2>
        {% if recent_transactions %}
            <table class="transaction-table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Description</th>
                        <th>Amount</th>
                        <th>Balance</th>
                    </tr>
                </thead>
                <tbody>
                    {% for transaction in recent_transactions %}
                        <tr>
                            <td>{{ transaction.transaction_date.strftime('%Y-%m-%d %H:%M') }}</td>
                            <td>{{ transaction.description }}</td>
                            <td class="{{ 'positive' if transaction.amount > 0 else 'negative' }}">
                                ${{ "%.2f"|format(transaction.amount|abs) }}
                            </td>
                            <td>${{ "%.2f"|format(transaction.balance_after) }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
            <a href="{{ url_for('transaction.transaction_history') }}" class="btn btn-secondary">View All Transactions</a>
        {% else %}
            <p>No recent transactions.</p>
        {% endif %}
    </section>
</div>
{% endblock %}